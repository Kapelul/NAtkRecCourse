## H2: Lempiväri: violetti

### x) Lue ja vastaa lyhyesti kysymyksiin.

> Bianco 2013: Pyramid of Pain
- Tuskan pyramidi kuvaa, kuinka jotkin (kompromissin)indikaattorit ovat vaikeampia/vaivaannuttavampia kuin toiset (toisin sanoen kuvaa eri tasojen tehokkuutta hyökkäysten torjumisessa). Pyramidin pohjalla (hash, IP) olevia esim. IP-osoitteita pystytään helposti vaihtamaan, kun taas mitä korkeammalle mennään, sitä vaikeampi hyökkääjän on vaihtaa käyttämäänsä menetelmää.
TTP (Tactics, Techniques & Procedures), eli pyramidin korkeimmalla tasolla, toimitaan suoraan hyökkääjän käyttäytymistä vastaan, ei hyökkääjän käyttämiä työkaluja (jos vastaat hyökkääjäm TTP:siin, pakotat heidät keksimään uutta tai luovuttamaan).

> Diamond Model
- Timanttimalli on kyberuhkien analysoinnin ja ymmärtämisen kehys. Se koostuu neljästä komponentista (adversary, infrastructure, capability ja victim, jotka ovat kaikissa kyberhyökkäyksissä) ja niiden suhteista toisiinsa analyysin perustana. 
Malli auttaa ymmärtämään hyökkäysten kokonaiskuvaa ja paljastamaan hyökkääjän toimintatapoja yhdistämällä nämä toisiinsa.

### a) Apache log

Apache2 weppipalvelin oli jo asennettuna Kali-Linuxiin, mutta sen asentaminen onnistuu `sudo apt-get install apache2`. Apache palvelimen käynnistäminen onnistuu `sudo systemctl start apache2`. En lähtenyt muokkaamaan apache palvelimen oletussivua, joten mennään oletus weppisivulla tutkiskelemaan. Tehtävän annon ohjeiden mukaan menin salaamattomaan `http://localhost` palvelimelleni. 

![kuva](https://github.com/user-attachments/assets/1c403294-9bfa-4d96-b4b1-36daa26b0867)

Ladattuani weppisivun, menin /var/log/apache2/ hakemistoon tutkimaan lokia, josta analysoin yhden rivin, mikä vastaa sivulataustani. Otin ensimmäisen rivin missä oli:
```
127.0.0.1 - - [08/Apr/2025:19:22:00 -0400] "GET / HTTP/1.1" 200 3383 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:128.0) Gecko/20100101 Firefox/128.0"
```
Lokirivistä näkyy ensimmäisenä IP-osoite mistä pyyntö tuli, eli tässä tapauksessa localhost. Rivissä näkyy myös ajankohta jolloin pyyntö vastaanotettiin (UTC-4, tarkastin `timedatectl` komennolla ja piti paikkaansa). GET tarkoittaa metodia jolla pyydetään dataa. HTTP/1.1 kertoo HTTP:n version. 200 on vastauskoodi, mikä tarkoittaa, että kaikki on ok pyynnön kannalta. 3383 on vastauksen koko tavuina (n.3.4KB). Rivi kertoo myös user-agentin eli tiedon selaimesta, missä näkyy, että firefox 128.0 verkkoselainta ja linux käyttöjärjestelmää. 

### b) Nmapped

Porttiskannasin weppipalvelimeni käyttämällä localhost osoitetta nmap:lla `sudo nmap -A localhost`.

![kuva](https://github.com/user-attachments/assets/5131dda3-c83a-4b26-9544-1f88fb21fdeb)

Tuloksissa näkyy, että isäntä on tavoitettavissa (host is up) ja vasteaika(latency) on pieni, skannaus tehtiin localhostiin eli omaan koneeseen. Not shown: 999 closed tcp ports (reset) kertoo, että 999 TCP-porttia on suljettuna ja hylkäsivät yhteyden. Ainut avoin portti on siis 80/tcp, jota käyttää apache palvelu 2.4.63 versio. Tuloksissa näkyy myös laite/käyttöjärjestelmä (linux). Network distance kertoo, että verkossa ei ollut "hops" (0, koska localhost. Jos olisi toinen kone samassa verkkosegmentissä niin 1 ja tulisi 1 lisää jokaisesta reitittimestä (Nmap book). 

### c) Skriptit

Skriptit, jotka olivat päällä näkyvät edellisen tehtävän kuvasta eli `http-title` ja `http-server-header`. Http-title hakee verkkosivun <title>-tagin arvon http-pyynnössä ja lukee vastauksen elementin. Http-server-header lukee http-vastauksen server otsikon, joka paljastaa palvelinohjelmiston nimen ja version. 

### d) 











### Lähteet

https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/#h2-lempivari-violetti

https://detect-respond.blogspot.com/2013/03/the-pyramid-of-pain.html

https://kravensecurity.com/diamond-model-analysis/

https://nmap.org/book/osdetect-usage.html
