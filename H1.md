## H1 Sniff

x) Lue ja tiivistä.

>Karvinen 2025: Wireshark - Getting Started
- Wireshark on johtava tietoliikenteen "snifferi" ja analysoija.

- Wiresharkissa voidaan valita jokin verkkoliitäntä/yhteys (voi olla virtuaalinen), jonka yhteyttä voidaan kaapata (tai vaihtoehtoisesti kaikkia).

- Kaapatut tiedot voidaan tallentaa. Tietoja voidaan filteröidä esim., että näkyy vain dns, tls, http tai vaikkapa tietty portti (esim. tcp.port==443).

>Karvinen 2025: Network Interface Names on Linux
- Verkkoliitännät eivät välttämättä ole aina fyysisiä verkkokortteja (kuten loopback).

- Systemd nimeää Linuxin verkkoliitännät.

- Nimen alku (prefix) identifioi sen tyypin (WLAN=wl, loopback adapter=lo).

```
ip a
```
```
ip route
```
- Komennoilla saat näkyviin omat yhteydet/liitännät.

a) Asenna Debian tai Kali Linux virtuaalikoneeseen.

Latasin Kali Linuxin VirtualBoxille kali.org sivustolta. Suorittamalla .vbox tiedoston VirtualBox laittoi automaattisesti Kali virtuaalikoneen käyttövalmiiksi. Asennus ja virtuaalikoneen käynnistys sujui ongelmitta, vaikka koneeni RAM-muistin määrä aina pelottaakin.

b) Ei voi kalastaa.

Virtuaalikoneen yhteyden katkaiseminen internettiin tapahtui helposti Kali:ssa menemällä työpöydällä oikean ylänurkan Ethernet Network kohtaan ja painamalla disconnect.

![kuva](https://github.com/user-attachments/assets/a5792514-627d-4e4d-82a5-fd2f156715e8)

Toinen tapa olisi tietysti VirtualBoxin virtuaalikoeen asetuksista ottaa "kaapeli irti":

![kuva](https://github.com/user-attachments/assets/b5ac0a1a-ab8f-4081-a271-36c5655f3976)

Kolmas tapa vielä on, että itse Kali Linuxissa katkaistaan verkkosovitin (tapauksessani eth0) terminaalissa komennolla:

```
sudo ifconfig eth0 down
```
muuttamalla down>up, saadaan verkko takaisin. Kokeilin myös tapella ifdown ja ifup komennoilla, ja laittamalla eth0=eth0 /run/network hakemistossa olevaan ifstate tiedostoon, mutta en saanut asiaa toimimaan näillä komennoilla.

![kuva](https://github.com/user-attachments/assets/57b5caf4-8829-4dd9-8390-fe7cf5a90edf)

c) Asenna Wireshark ja sieppaa liikennettä

Wireshark oli Kali Linuxissa jo valmiiksi asennettuna uusimmalla versiolla, mutta sen voi asentaa komennolla:

```
sudo apt install wireshark
```

Aloitin Wiresharkissa eth0 sovittimen kaappaamisen ja menin google.com sivustolle firefox selaimella.

Osoitetaan TCP/IP mallin neljä kerrosta:

![kuva](https://github.com/user-attachments/assets/4bb0dd87-0a32-4b30-bd3c-79be487f7c05)


- Link: Ethernet II, näkyy esim. MAC-osoitteet.

- Internet: Internet Protocol Version 4, näkyy esim. IP-osoitteet.

- Transport: Transmission Control Protocol, näkyy portit.

- Application: Transport Layer Security.

e) Mitäs tuli surffattua?

Latasin Tero Karvisen tehtävissä olleen surfing-secure.pcap tiedoston johon lähdin tutustumaan. Selville sai ainakin heti, että 283 framea tuli kaappauksesta ja sen kesto oli noin 7,5s.

![kuva](https://github.com/user-attachments/assets/ad9b75db-e3c3-4194-ab65-7f471f73f83a)

Protokollia mitä käytettiin pääsin näkemään statistics>protocol hierarchy:

![kuva](https://github.com/user-attachments/assets/5464d238-5e73-469b-94e8-dbd977effa02)

IPv4-statistics löytyy eri IPv4 osoitteita, mitä on tullut kaapattua:

![kuva](https://github.com/user-attachments/assets/23fb200f-4936-4aad-99df-abf7ca22bef6)

Endpoints näkyy ainakin kaksi eri MAC osoitetta (ethernet-kaapeli ja Wi-Fi todennäköisesti):

![kuva](https://github.com/user-attachments/assets/3e0682d2-1e30-470a-9a05-9191cb98e34a)

Yleisesti kaapattujen pakettien infoja selatessa löytyi ainakin google.com ja terokarvinen.com, missä on käyty selailemassa.

f)


























Lähteet:

https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/#h1-sniff

https://terokarvinen.com/wireshark-getting-started/

https://terokarvinen.com/network-interface-linux/

https://www.kali.org/get-kali/#kali-virtual-machines

https://unix.stackexchange.com/questions/50602/cant-ifdown-eth0-main-interface
